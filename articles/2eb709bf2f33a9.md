---
title: "neovimのCursorの色が変わらないと思ったらターミナルのカラースキームのせいだった話"
emoji: "⛳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["vim", "neovim", "wezterm"]
published: true
---

タイトルの通りです。
vimで現在の文字位置の背景色を変えるために`highlight`コマンドで`Cursor`の背景色を変更しようとしましたが、 変更できませんでした。

原因はターミナルの背景色でした。

## 経緯

解決策が気になる方は飛ばしてください。
vimで現在の文字位置の背景色を変えるコマンドと言えば、`higlight`コマンドがあります。

https://vim-jp.org/vimdoc-ja/syntax.html#hl-Cursor

現在の文字をハイライトするためには`Cursor`のハイライトグループの背景色を変えればよいと思い、以下のように変更しました。

```vim
highlight Cursor guibg=#ff0000 guifg=#ffffff ctermbg=red ctermfg=white
```

`init.lua`の場合は以下です。
```lua
vim.cmd("highlight Cursor guibg=#ff0000 guifg=#ffffff ctermbg=red ctermfg=white")
```

そして、コマンドモードで背景色を確認します。
```
:hi Cursor
```

無事、反映されていそうです。
![hi Cursor result](/images/2eb709bf2f33a9/hi_cursor.png)


しかし、実際にはCursorの背景色は赤にならず、目立ちにくい色のままです。

![difficult to see](/images/2eb709bf2f33a9/difficult_to_see.png)


## ターミナルのカラースキームの変更

結論、weztermの色の背景色の設定が原因でした。
```lua
config.color_scheme = 'neobones_light'
```
これをコメントアウトするとハイライトが乗るようになりました。
よく見たら、現在のカーソル位置とターミナルのカーソル位置の色が同じことが分かります。

### before

![before cursor in term 01](/images/2eb709bf2f33a9/before_cursor_01.png)

![difficult to see](/images/2eb709bf2f33a9/difficult_to_see.png)

### after


![after cursor in term 01](/images/2eb709bf2f33a9/after_cursor_01.png)

![after cursor in editor 02](/images/2eb709bf2f33a9/after_cursor_02.png)



## 代替案

ただ、vim上で解決したい気持ちもあります。
代替案として、ハイライトを現在の行と列の両方につけると、交差する部分がハイライトになります。

```vim
set cursorLine
set cursorcolumn
```

init.luaの場合
```lua
vim.cmd("set cursorLine")
vim.cmd("set cursorcolumn")
```
参考
https://vim-jp.org/vim-users-jp/2011/07/04/Hack-222.html

