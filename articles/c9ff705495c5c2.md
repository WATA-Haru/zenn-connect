---
title: "vscodeã®TypeScriptã®ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒåŠ¹ã‹ãªããªã£ãŸã®ã§ä¿®æ­£ã—ãŸ(tsconfig)"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["vscode", "TypeScript", "tsconfig"]
published: false
---

# TL;DR
vscodeã§ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦TypeScriptã®ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒåŠ¹ã‹ãªããªã‚Šã¾ã—ãŸã€‚

```log
To enable project-wide JavaScript/TypeScript language features,
exclude large folders with source files that you do not work on.
```

TypeScriptã®ã‚³ãƒ¼ãƒ‰è£œå®Œã‚’ã™ã‚‹å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºãŒå¤§ãã™ããŸã‚ˆã†ã§ã€`tsconfig`ã§å¤§ãã„ã‚µã‚¤ã‚ºã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä»Šå›ã ã¨nuxtã®outputï¼‰ã‚’`exclude`ã—ãŸã‚‰æ²»ã‚Šã¾ã—ãŸã€‚


```diff json
{
  // ...
  // @ext:vscode.typescript-language-features
  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒTypeScriptã®ã‚³ãƒ¼ãƒ‰è£œå®Œã§ãã‚‹ã‚µã‚¤ã‚ºã‚’è¶…ãˆã¦ã„ã‚‹ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã®å›é¿ç”¨
+"exclude": [
+ "output/public/_nuxt/",
+ ]
}
```

# ã‚¨ãƒ©ãƒ¼è§£æ±ºã®æ‰‹é †
1. TypeScriptã®ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒåŠ¹ããƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’è¶…ãˆã¦ã„ã¾ã™ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹
2. `@ext:vscode.typescript-language-features`ã®logã‚’åãå‡ºã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¶…éã‚’èµ·ã“ã™ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®š
3. è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`tsconfig`ã§exclude

# çµŒç·¯

## 1. ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã™ãã¦è£œå®ŒãŒåŠ¹ã‹ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
vscodeã§ç·¨é›†ã—ã¦ã„ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦ãã¾ã—ãŸã€‚

```log
To enable project-wide JavaScript/TypeScript language features,
exclude large folders with source files that you do not work on.
```

TypeScriptã®è¨€èªæ©Ÿèƒ½ã‚’åºƒç¯„å›²ã§ä½¿ã„ãŸã„ã®ãªã‚‰ã°ã€å¤§ãã„ã‚µã‚¤ã‚ºã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–ã—ã¦ãã ã•ã„ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã—ãŸã€‚


![TypeScript language server error](/images/c9ff705495c5c2/ts-language-server-error.png)

## 2. typescript-language-featuresã®logã‚’å‡ºåŠ›ã™ã‚‹
èª¿ã¹ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®issueãŒå‡ºã¦ãŠã‚Šã€vscodeã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹`typescript-language-features`ãŒåŸå› ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

https://github.com/microsoft/TypeScript/issues/53492#issuecomment-1876072922


### tsserverã®logå‡ºåŠ›ã¨ç¢ºèªæ‰‹é †
issueã«ã‚‚è¨˜è¼‰ãŒã‚ã‚Šã¾ã™ãŒè£œè¶³ã—ã¾ã™ã€‚

åˆã‚ã«ã€vscodeå³ä¸Šã®3ã¤ã®ç‚¹ã‹ã‚‰`configure editor`ã‚’é¸æŠã—ã€æ¤œç´¢ãƒãƒ¼ã«`@ext:vscode.typescript-language-features log`ã¨å…¥åŠ›ã—ã¾ã™ã€‚

![configure editorsã§`@ext:vscode.typescript-language-features`ã‚’é–‹ã](/images/c9ff705495c5c2/configure-editors.png)


æ¬¡ã«ã€logã‚’å‡ºã™è¨­å®šã‚’ã—ã¾ã™ã€‚åˆæœŸè¨­å®šã§ã¯`off`ã«ãªã£ã¦ã„ã‚‹ã®ã§`normal`ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚

![@ext:vscode.typescript-language-features logã§æ¤œç´¢ã—ã¦logã‚’å‡ºã™](/images/c9ff705495c5c2/editor-loging.png)

æœ€å¾Œã«ã€logãŒã©ã“ã«å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç‰¹å®šã—ã¾ã™ã€‚vscodeã®terminalç”»é¢ã«OUTPUTãŒã‚ã‚‹ã®ã§ã€ãã“ã§`TypeScript`ã‚’é¸æŠã™ã‚‹ã¨ã€`tsserver.log`ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚
![OUTPUTã‹ã‚‰logã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®š](/images/c9ff705495c5c2/find-log-file.png)


## 3. `tsserver.log`ã§ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’ç‰¹å®š
logãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¾ã™ã€‚ã¾ãšã€`Could not find source file`ãŒå‡ºã¦ãŠã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã‚ã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚
```log
Error: Could not find source file: 
'/Users/name/project/client/componenTypeScript/atom/InputField/index.vue'.
```

logã‚’è¿½ã†ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`Non TS file size exceeded limit`ãŒç¢ºèªã§ãã¾ã—ãŸã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒåŸå› ã®ã‚ˆã†ã§ã™ã€‚
ä»Šå›ã¯nuxtã‚’buildã—ãŸå¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆoutput/public/_nuxt`ï¼‰ãŒtsservå¯¾è±¡ã«å«ã¾ã‚Œã¦ã„ãŸã®ã§èª­ã¿è¾¼ã¿å¯èƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’è¶…ãˆã¦ã—ã¾ã„ã¾ã—ãŸã€‚

```log
Info 12   [09:58:13.648] Non TS file size exceeded limit (21175977). 
Largest files: /Users/name/project/client/output/public/_nuxt/BYFg9WlK.js:555803,
/Users/name/project/client/output/public/_nuxt/CFAdppzp.js:555803,
/Users/name/project/client/output/public/_nuxt/JazV3xHV.js:555803,
/Users/name/project/client/output/public/_nuxt/V42d_FHD.js:555803,
/Users/name/project/client/output/public/_nuxt/i7pFhaQ6.js:555803
```

## 4. `tsconfig`ã§å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã®exclude

:::details TypeScriptã®language serverãŒtsconfigã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹log

```log
Info 28   [09:58:19.567] getConfigFileNameForFile:: File: Grid.story.vue ProjectRootPath: client:: Result: /Users/name/project//client/tsconfig.json
Info 29   [09:58:19.567] getConfigFileNameForFile:: File: Grid/index.vue ProjectRootPath: client:: Result: /Users/name/project//client/tsconfig.json
Info 30   [09:58:19.567] getConfigFileNameForFile:: File:BasicPlanConfirm/index.test.TypeScript ProjectRootPath: client:: Result: /Users/name/project//client/tsconfig.json
```
:::

å…ˆã»ã©ã€`Non TS file size exceeded limit`ã®åŸå› ãŒã€`output/public/_nuxt`ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚logã‚’è¦‹ã‚‹ã¨`tsserver`ã¯`tsconfig`ã§è¨­å®šã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§ã€å¯¾è±¡ã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`exclude`ã—ã¾ã—ãŸã€‚

```diff json
+ "exclude": [
+  "output/public/_nuxt/",
+  ]
```
ã“ã‚Œã§ç„¡äº‹è£œå®ŒãŒåŠ¹ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼

