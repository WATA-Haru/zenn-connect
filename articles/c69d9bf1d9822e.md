---
title: "vimのコマンドラインウィンドウでコマンド履歴を編集・コピーする"
emoji: "🐧"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [vim]
published: false
publication_name: "bita"
---

## はじめに
vimのコマンドラインモードを使う際、自分が過去に使ったコマンドの履歴をコピーしたい場合や長く複雑なコマンドを入力したい場合があります。

このような場合にvimにあるコマンドラインウィンドウを使うと便利だったのでコマンドラインウィンドウへの入り方と実際の画面を紹介します。

以下では、Ctrl+fなどのCtrlが入る入力を`<C-f>`のように表記します。

## vimのコマンドラインウィンドウとは
vimにはコマンドラインウィンドウというものがあります。
https://vim-jp.org/vimdoc-ja/cmdline.html#cmdline-window

コマンドラインウィンドウを開くと、以下の画像のようにコマンドの履歴が表示されます。
表示された履歴に対してvimの操作でビジュアルモードに入っての選択やインサートモードに入っての編集ができます。

![コマンドラインウィンドウでコマンドの履歴一覧が表示される様子](/images/c69d9bf1d9822e/Pasted%20image%2020251216204455.png)

## コマンドラインウィンドウへの入り方
※スクリーンショットを撮ったため、添付画像に`<Snapshot>`のキー入力が含まれていますが無視してください。

### ノーマルモードから入る場合`q:`
ノーマルモードからコマンドラインウィンドウへ入る場合は
`q:`で入れます。抜ける時は`:q`で抜けられます。


![:qを押下してコマンドラインウィンドウの表示](/images/c69d9bf1d9822e/Pasted%20image%2020251216203924.png)


### コマンドラインモードから 入る場合: `<C-f>`
コマンドラインモードからコマンドラインウィンドウへ入る場合は`<C-f>`で入れます。

1. `:`でコマンドラインモードに入る
![`:`でコマンドラインモードに入る](/images/c69d9bf1d9822e/Pasted%20image%2020251216204238.png)

2. `<C-f>`でコマンドラインウィンドウに入る
![`<C-f>`でコマンドラインウィンドウに入る](/images/c69d9bf1d9822e/Pasted%20image%2020251216204200.png)

## コマンドラインウィンドウでの操作例
上記でコマンドラインウィンドウに入れたので、以下の画像のようにビジュアルモードに入ってコマンドをヤンクできます。
![コマンドラインモードでビジュアルモードを使って選択する画像](/images/c69d9bf1d9822e/Pasted%20image%2020251216205000.png)


また、以下のようにコマンドラインウィンドウにコマンドを入力後、インサートモードのままEnterを押すと、最も新しいコマンドが実行されます。

以下に`%s/my-gitconfig/ThisIsSampleText/g`を打ち込んで、`7.my-gitconfig`を`ThisIsSampleText`に置換する例を示します。

1. コマンドラインウィンドウに入り、`%s/my-gitconfig/ThisIsSampleText/g`を打ち込む。

![`%s/my-gitconfig/ThisIsSampleText/g`をコマンドラインウィンドウで打つ](/images/c69d9bf1d9822e/Pasted%20image%2020251216205232.png)


2. コマンドラインウィンドウのインサートモードのままEnterを押す。
![my-gitconfigがThisIsSampleTextに置換された画像](/images/c69d9bf1d9822e/Pasted%20image%2020251216205511.png)

`7.my-gitconfig`が`ThisIsSampleText`に置換されたことが分かります。

## 参考
https://vim-jp.org/vimdoc-ja/cmdline.html#cmdline-window

https://qiita.com/monaqa/items/e22e6f72308652fc81e2

https://qiita.com/gorilla0513/items/f4a5fd835201cf49fda1
